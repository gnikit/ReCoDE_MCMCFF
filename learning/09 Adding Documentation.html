
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Adding Documentation &#8212; MCFF 1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Doing Reproducible Science" href="08%20Doing%20Reproducible%20Science.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="08%20Doing%20Reproducible%20Science.html" title="Doing Reproducible Science"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MCFF 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Adding Documentation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1 align="center">Markov Chain Monte Carlo for fun and profit</h1>
<h1 align="center"> üé≤ ‚õìÔ∏è üëâ üß™ </h1>
<section id="adding-documentation">
<h1>Adding Documentation<a class="headerlink" href="#adding-documentation" title="Permalink to this heading">¬∂</a></h1>
<p>References:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/restructuredtext/basics.html">Intro to basic ReStrutured Text</a></p></li>
<li><p><a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/quickstart.html">Getting started with Sphinx</a></p></li>
</ul>
<p>If we produce software that might be used by others even colleagues, it‚Äôs imperative to document how it works and should be used.</p>
<p>The classic way to do this in the python community is to use a tool called <a class="reference external" href="https://www.sphinx-doc.org/en/master/">Sphinx</a>, you‚Äôll probably be quite familiar with pages generated by Sphinx if you‚Äôve ever used any python packages. To give you teaser by the end of this chapter we will have an autogenerated website for the project that looks like <a class="reference external" href="https://recode-mcmcff.readthedocs.io/en/latest/">this</a></p>
<p><img alt="image.png" src="learning/attachment:bca7ddda-51b5-4171-98e0-09c5d71de6a5.png" /></p>
<p>We‚Äôll use sphinx along with a couple plugins: <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html">autodoc</a> allows us to generate documentation automatically from the docstrings in our source code, while <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">napoleon</a> allows us to use <a class="reference external" href="https://numpydoc.readthedocs.io/en/latest/format.html">NUMPYDOC</a> and Google formats for the docstrings in addition to <a class="reference external" href="https://docutils.sourceforge.io/rst.html">reStructuredText</a></p>
<p>What this means is that we‚Äôll be able to write documentation directly into the source code and it will get rendered into a nice website. This helps keep the documentation up to date beause it‚Äôs right there next to the code!</p>
<p>This means that the part of our source code that looks like:
<img alt="image.png" src="learning/attachment:369af465-6c2c-42a8-89d5-e1c82259ff6e.png" />
will get rendered to this:
<img alt="image.png" src="learning/attachment:df4ad322-fbf0-4ebe-bfa8-e668a37f6f49.png" /></p>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¬∂</a></h2>
<p>Make sure sphinx is installed in the environment then make a folder called <code class="docutils literal notranslate"><span class="pre">docs/</span></code>, cd into it and run sphinx</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>% mkdir docs
% <span class="nb">cd</span> docs
% sphinx-quickstart <span class="c1">#just go with the defaults</span>
</pre></div>
</div>
<p>This will populate <code class="docutils literal notranslate"><span class="pre">docs</span></code> with a skeleton sphinx project, to tell sphinx where to find our code we‚Äôll add some lines to <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;../src&#39;</span><span class="p">))</span>
<span class="c1">#since conf.py is in docs/ the path ../src points to where our module is</span>
</pre></div>
</div>
<p>We add the extensions by adding this to <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> too:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;sphinx.ext.autodoc&#39;</span><span class="p">,</span>
    <span class="s1">&#39;sphinx.ext.napoleon&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
<section id="writing-docstrings">
<h2>Writing docstrings<a class="headerlink" href="#writing-docstrings" title="Permalink to this heading">¬∂</a></h2>
<p>Numpy style docstrings look like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span> <span class="n">arg2</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Summary line.</span>

<span class="sd">    Extended description of function.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    arg1 : int</span>
<span class="sd">        Description of arg1</span>
<span class="sd">    arg2 : str</span>
<span class="sd">        Description of arg2</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    bool</span>
<span class="sd">        Description of return value</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<p>I normally just copy paste this and go from there but there‚Äôs a full description <span class="xref myst">here</span>. You can also check out the docstrings in MCFF</p>
</section>
<section id="making-the-function-declarations-a-bit-nicer">
<h2>Making the function declarations a bit nicer<a class="headerlink" href="#making-the-function-declarations-a-bit-nicer" title="Permalink to this heading">¬∂</a></h2>
<p>Longer function names in the generated documentation currently generate with no line break, I found a fix for that buried <a class="reference external" href="https://github.com/sphinx-doc/sphinx/issues/1514#issuecomment-742703082">inside a bug report on sphinx</a></p>
<p>It involves adding some custom css and an extra line to <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">html_css_files</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;custom.css&#39;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
<p>Finally we add a <code class="docutils literal notranslate"><span class="pre">readthedocs.yaml</span></code> file (which you can copy from the root of this repo) to tell readthedocs how to build our documentation. https://docs.readthedocs.io/en/stable/config-file/v2.html#packages</p>
<p>And the documentation is now hosted <a class="reference external" href="https://recode-mcmcff.readthedocs.io/en/latest/#">online!</a></p>
<section id="documentation-ideas">
<h3>Documentation Ideas<a class="headerlink" href="#documentation-ideas" title="Permalink to this heading">¬∂</a></h3>
<p>Readthedocs can be a bit tricky to setup, it is also possible to use Github pages to acomplish something similar. Another idea is to include some simple copyable code snippets in a quickstart guide. This lets people get up and running your code more quickly than is they need to read the API docs to understand how to interact with your module.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Adding Documentation</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
<li><a class="reference internal" href="#writing-docstrings">Writing docstrings</a></li>
<li><a class="reference internal" href="#making-the-function-declarations-a-bit-nicer">Making the function declarations a bit nicer</a><ul>
<li><a class="reference internal" href="#documentation-ideas">Documentation Ideas</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="08%20Doing%20Reproducible%20Science.html"
                          title="previous chapter">Doing Reproducible Science</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/learning/09 Adding Documentation.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="08%20Doing%20Reproducible%20Science.html" title="Doing Reproducible Science"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">MCFF 1.0 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Adding Documentation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, Thomas Hodson.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.0.2.
    </div>
  </body>
</html>